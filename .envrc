# shellcheck shell=bash
if has nix; then
  # Are flake supported and enabled?
  if nix show-config | grep experimental-features | grep -q flakes; then
    # Do we have nix-direnv?
    if ! has nix_direnv_version || ! nix_direnv_version 3.0.4; then
      source_url "https://raw.githubusercontent.com/nix-community/nix-direnv/3.0.4/direnvrc" "sha256-gMHkKyEOq/T0XmHKgz+pN+fUQC/1EKPAuOtYM95lLnU="
    fi

    use flake
  else
    use nix
  fi
fi
